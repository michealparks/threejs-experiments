import{S as e,i as o,s as t,e as n,c as i,a,d as r,f as c,H as v,z as g,P as s,Q as l,R as f,T as x,U as d,V as u,W as m,X as y,Y as z}from"../../chunks/vendor-60c0aab2.js";import{G as P}from"../../chunks/gl-97786ef4.js";import{a as p}from"../../chunks/assets-06283924.js";import{O as w}from"../../chunks/orbitControls-41e68a8b.js";import"../../chunks/paths-45dac81d.js";function h(e){let o;return{c(){o=n("canvas")},l(e){o=i(e,"CANVAS",{}),a(o).forEach(r)},m(t,n){c(t,o,n),e[1](o)},p:v,i:v,o:v,d(t){t&&r(o),e[1](null)}}}function _(e,o,t){var n=this&&this.__awaiter||function(e,o,t,n){return new(t||(t=Promise))((function(i,a){function r(e){try{v(n.next(e))}catch(o){a(o)}}function c(e){try{v(n.throw(e))}catch(o){a(o)}}function v(e){var o;e.done?i(e.value):(o=e.value,o instanceof t?o:new t((function(e){e(o)}))).then(r,c)}v((n=n.apply(e,o||[])).next())}))};let i;return g((()=>n(void 0,void 0,void 0,(function*(){const e=new P(i),o=new w(e.camera,i),t=new s({color:16777189}),n=new l({uniforms:{uTime:{value:0},uColorStart:{value:new f("#1E88E5")},uColorEnd:{value:new f("#5E35B1")}},vertexShader:"varying vec2 vUv;void main(){vUv=uv;vec4 modelPosition=modelMatrix*vec4(position,1.0);vec4 viewPosition=viewMatrix*modelPosition;vec4 projectionPosition=projectionMatrix*viewPosition;gl_Position=projectionPosition;}",fragmentShader:"vec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x,289.0);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-0.85373472095314*r;}vec3 fade(vec3 t){return t*t*t*(t*(t*6.0-15.0)+10.0);}float cnoise(vec3 P){vec3 Pi0=floor(P);vec3 Pi1=Pi0+vec3(1.0);Pi0=mod(Pi0,289.0);Pi1=mod(Pi1,289.0);vec3 Pf0=fract(P);vec3 Pf1=Pf0-vec3(1.0);vec4 ix=vec4(Pi0.x,Pi1.x,Pi0.x,Pi1.x);vec4 iy=vec4(Pi0.yy,Pi1.yy);vec4 iz0=Pi0.zzzz;vec4 iz1=Pi1.zzzz;vec4 ixy=permute(permute(ix)+iy);vec4 ixy0=permute(ixy+iz0);vec4 ixy1=permute(ixy+iz1);vec4 gx0=ixy0/7.0;vec4 gy0=fract(floor(gx0)/7.0)-0.5;gx0=fract(gx0);vec4 gz0=vec4(0.5)-abs(gx0)-abs(gy0);vec4 sz0=step(gz0,vec4(0.0));gx0-=sz0*(step(0.0,gx0)-0.5);gy0-=sz0*(step(0.0,gy0)-0.5);vec4 gx1=ixy1/7.0;vec4 gy1=fract(floor(gx1)/7.0)-0.5;gx1=fract(gx1);vec4 gz1=vec4(0.5)-abs(gx1)-abs(gy1);vec4 sz1=step(gz1,vec4(0.0));gx1-=sz1*(step(0.0,gx1)-0.5);gy1-=sz1*(step(0.0,gy1)-0.5);vec3 g000=vec3(gx0.x,gy0.x,gz0.x);vec3 g100=vec3(gx0.y,gy0.y,gz0.y);vec3 g010=vec3(gx0.z,gy0.z,gz0.z);vec3 g110=vec3(gx0.w,gy0.w,gz0.w);vec3 g001=vec3(gx1.x,gy1.x,gz1.x);vec3 g101=vec3(gx1.y,gy1.y,gz1.y);vec3 g011=vec3(gx1.z,gy1.z,gz1.z);vec3 g111=vec3(gx1.w,gy1.w,gz1.w);vec4 norm0=taylorInvSqrt(vec4(dot(g000,g000),dot(g010,g010),dot(g100,g100),dot(g110,g110)));g000*=norm0.x;g010*=norm0.y;g100*=norm0.z;g110*=norm0.w;vec4 norm1=taylorInvSqrt(vec4(dot(g001,g001),dot(g011,g011),dot(g101,g101),dot(g111,g111)));g001*=norm1.x;g011*=norm1.y;g101*=norm1.z;g111*=norm1.w;float n000=dot(g000,Pf0);float n100=dot(g100,vec3(Pf1.x,Pf0.yz));float n010=dot(g010,vec3(Pf0.x,Pf1.y,Pf0.z));float n110=dot(g110,vec3(Pf1.xy,Pf0.z));float n001=dot(g001,vec3(Pf0.xy,Pf1.z));float n101=dot(g101,vec3(Pf1.x,Pf0.y,Pf1.z));float n011=dot(g011,vec3(Pf0.x,Pf1.yz));float n111=dot(g111,Pf1);vec3 fade_xyz=fade(Pf0);vec4 n_z=mix(vec4(n000,n100,n010,n110),vec4(n001,n101,n011,n111),fade_xyz.z);vec2 n_yz=mix(n_z.xy,n_z.zw,fade_xyz.y);float n_xyz=mix(n_yz.x,n_yz.y,fade_xyz.x);return 2.2*n_xyz;}varying vec2 vUv;uniform float uTime;uniform vec3 uColorStart;uniform vec3 uColorEnd;void main(){vec2 displacedUv=vUv+cnoise(vec3(vUv*5.0,uTime*0.1));float strength=cnoise(vec3(displacedUv*5.0,uTime*0.2));float outerGlow=distance(vUv,vec2(0.5))*6.0-1.8;strength+=outerGlow;strength+=step(-0.2,strength)*0.8;vec3 color=mix(uColorStart,uColorEnd,strength);gl_FragColor=vec4(color,1.0);}"});e.renderer.outputEncoding=x,yield Promise.all([e.init(),p.load("portal.glb"),p.load("portal.jpg")]);const a=p.get("portal.glb"),r=p.get("portal.jpg");r.flipY=!1,r.encoding=x;const c=new s({map:r});a.scene.traverse((e=>{"Portal"===e.name?e.material=n:"LampLight1"===e.name||"LampLight2"===e.name?e.material=t:e.material=c}));const v=(e=>{const o=new m,t=new Float32Array(90);for(let i=0;i<30;i++)t[3*i+0]=4*(Math.random()-.5),t[3*i+1]=1.5*Math.random(),t[3*i+2]=4*(Math.random()-.5);o.setAttribute("position",new y(t,3));const n=new l({uniforms:{uBaseSize:{value:100},uPixelRatio:{value:e}},vertexShader:"uniform float uPixelRatio;uniform float uBaseSize;void main(){vec4 modelPosition=modelMatrix*vec4(position,1.0);vec4 viewPosition=viewMatrix*modelPosition;vec4 projectionPosition=projectionMatrix*viewPosition;gl_Position=projectionPosition;gl_PointSize=uBaseSize*uPixelRatio;gl_PointSize*=(1.0/-viewPosition.z);}",fragmentShader:"void main(){float distanceToCenter=distance(gl_PointCoord,vec2(0.5));float strength=0.05/distanceToCenter-0.1;gl_FragColor=vec4(1.0,1.0,1.0,strength);}",transparent:!0,depthWrite:!1,blending:z});return new d(o,n)})(e.renderer.getPixelRatio());e.scene.add(a.scene),e.scene.add(v),e.setAnimationLoop(((e,t)=>{o.update(),n.uniforms.uTime.value=t}))})))),[i,function(e){u[e?"unshift":"push"]((()=>{i=e,t(0,i)}))}]}export default class extends e{constructor(e){super(),o(this,e,_,h,t,{})}}
