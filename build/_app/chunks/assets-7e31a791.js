import{a9 as e,aa as a,ab as t,ac as s}from"./vendor-58402af1.js";const n=new s,r=new e,o=new a,c=new t;r.setPath("/textures/"),o.setPath("/mp3/"),c.setPath("/glb/");const l=new Set,u=new Set,d=new Set,i=new Map,w=async(e,a)=>{const t=await fetch(`/${a}/${e}`);i.set(e,await t.text())},p=e=>{switch(e.split(".").pop()){case"glb":return(async e=>{i.set(e,await c.loadAsync(e))})(e);case"png":case"jpg":return(async e=>{i.set(e,await r.loadAsync(e))})(e);case"mp3":return(async e=>{i.set(e,await o.loadAsync(e))})(e);case"json":return(async e=>{const a=await fetch(`/json/${e}`);i.set(e,await a.json())})(e);case"sprite":return(async e=>{const[a,t]=await Promise.all([fetch(`/textures/${e.replace("sprite","json")}`).then((e=>e.json())),r.loadAsync(e.replace("sprite","png"))]);i.set(e,{frames:a.frames,meta:a.meta,texture:t})})(e);case"obj":return w(e,"obj");case"glsl":return w(e,"glsl")}},f=e=>{for(const a of e)i.has(a)||l.add(a);return h},h={cache:i,manager:n,textureLoader:r,audioLoader:o,gltfLoader:c,get:e=>i.get(e),queue:(...e)=>(f(e),h),queueMany:f,on:(e,a)=>{switch(e){case"load":return u.add(a)}},load:()=>{for(const e of l)d.add(p(e));return Promise.all(d).then((()=>{for(const e of u)e();l.clear(),d.clear()}))},loadOne:p};export{h as a};
